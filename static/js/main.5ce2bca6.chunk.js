(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{16:function(e,t,n){},17:function(e,t,n){},19:function(e,t,n){},20:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(3),c=n.n(r),s=(n(16),n(4)),i=n(5),u=n(7),l=n(6),h=n(8),d=(n(17),n(1)),m=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={query:""},e.handleChange=function(t){e.setState({query:t.target.value.toLowerCase()})},e.handleSubmit=function(t){if(t.preventDefault(),""===e.state.query.trim())return h.b.error("Enter the search query");e.props.onSubmit(e.state.query),e.setState({query:""})},e}return Object(i.a)(n,[{key:"render",value:function(){return Object(d.jsx)("header",{className:"Searchbar",children:Object(d.jsxs)("form",{className:"SearchForm",onSubmit:this.handleSubmit,children:[Object(d.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(d.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(d.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:this.state.query,onChange:this.handleChange})]})})}}]),n}(a.Component),j=m,b=(n(19),document.querySelector("#modal-root")),f=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).handleKeyDown=function(t){"Escape"===t.code&&e.props.onClose()},e.handleOverlayClick=function(t){t.target===t.currentTarget&&e.props.onClose()},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){return Object(r.createPortal)(Object(d.jsx)("div",{className:"Overlay",onClick:this.handleOverlayClick,children:Object(d.jsx)("div",{className:"Modal",children:Object(d.jsx)("img",{src:this.props.url,alt:""})})}),b)}}]),n}(a.Component),p=f,g=n(10);n(20);var v=function(e){var t=e.webformatURL,n=e.tags,a=e.onClick;return Object(d.jsx)("li",{className:"ImageGalleryItem",onClick:a,children:Object(d.jsx)("img",{src:t,alt:n,className:"ImageGalleryItem-image"})})},y=n(11),O=n.n(y);var w=function(e,t){var n=new URLSearchParams({q:e,key:"22978515-5cb8795ed8e9eafc86c022855",image_type:"photo",orientation:"horizontal",per_page:12,page:t}),a="".concat("https://pixabay.com/api/","?").concat(n);return fetch(a).then((function(e){return e.ok?e.json():Promise.reject(new Error("Something went wrong, please try again later"))})).then((function(e){return e.hits}))},S=(n(41),"idle"),x="pending",C="resolved",k="rejected",L=document.querySelector("#loader-root"),N=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={images:null,status:"idle"},e.getLargeImgURL=function(t){e.props.onImageClick(e.state.images[t].largeImageURL)},e}return Object(i.a)(n,[{key:"componentDidUpdate",value:function(e,t){var n=this,a=this.props,o=a.query,r=a.page,c=a.showButton;if(e.query!==o)return this.setState({status:x}),c(!1),void w(o,r).then((function(e){if(!e.length)return h.b.info("No images found :("),void n.setState({images:e,status:S});n.setState({images:e,status:C},c(!0))})).catch((function(e){h.b.error("".concat(e.message),{theme:"colored"}),n.setState({status:k})}));e.page!==r&&(this.setState({status:x}),w(o,r).then((function(e){return n.setState((function(t){return{images:[].concat(Object(g.a)(t.images),Object(g.a)(e)),status:C}}))})).then((function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})})))}},{key:"render",value:function(){var e=this,t=this.state,n=t.images,a=t.status;return Object(d.jsxs)("div",{children:["pending"===a&&Object(r.createPortal)(Object(d.jsx)("div",{className:"loader",children:Object(d.jsx)(O.a,{type:"Grid",color:"#3f51b5",height:100,width:100})}),L),Object(d.jsx)("ul",{className:"ImageGallery",children:n&&n.map((function(t,n){var a=t.webformatURL,o=t.tags;return Object(d.jsx)("div",{children:Object(d.jsx)(v,{webformatURL:a,tags:o,onClick:function(){return e.getLargeImgURL(n)}})},n)}))})]})}}]),n}(a.Component),q=N;n(42);var M=function(e){var t=e.onClick;return Object(d.jsx)("div",{className:"ButtonContainer",children:Object(d.jsx)("button",{type:"button",className:"Button",onClick:t,children:"Load more"})})},U=(n(43),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={searchQuery:"",page:1,showButton:!1,showModal:!1,modalURL:""},e.onSearch=function(t){e.setState({searchQuery:t,page:1})},e.onLoadMore=function(){e.setState((function(e){return{page:e.page+1}}))},e.showButton=function(t){e.setState({showButton:t})},e.showModal=function(t){e.setState({showModal:!0,modalURL:t})},e.closeModal=function(){e.setState({showModal:!1})},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.state,t=e.searchQuery,n=e.page,a=e.modalURL,o=e.showModal,r=e.showButton;return Object(d.jsxs)("div",{children:[Object(d.jsx)(h.a,{autoClose:2500}),o&&Object(d.jsx)(p,{url:a,onClose:this.closeModal}),Object(d.jsx)(j,{onSubmit:this.onSearch}),Object(d.jsx)(q,{query:t,page:n,onImageClick:this.showModal,showButton:this.showButton}),r&&Object(d.jsx)(M,{onClick:this.onLoadMore})]})}}]),n}(a.Component)),I=U;c.a.render(Object(d.jsx)(o.a.StrictMode,{children:Object(d.jsx)(I,{})}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.5ce2bca6.chunk.js.map